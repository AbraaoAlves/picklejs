{"version":3,"sources":["../lib/generateAutoPhrases.js"],"names":["verbs","hex2rgbCSS","hex","red","green","blue","alpha","r","str","RegExp","or","arr","capture","noLeadingSpace","required","map","word","join","string","int","elInEl","When","clickElement","text","input","parent","randomVariableRegex","randomVariable","match","randomNumber","Math","round","random","replace","stateVariableRegex","stateVariable","STATE","type","contains","clear","screen","url","SCREENS","Error","cy","visit","direction","windowObj","window","then","win","get","body","scrollHeight","px","scrollTo","waitForResults","el1","el2","trigger","$el","console","log","getBoundingRect","Then","should","number","el","singular","shouldExist","background"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeO,UAAMA,wBAAQ,CACjB,GADiB,EAEjB,IAFiB,EAGjB,QAHiB,EAIjB,MAJiB,EAKjB,KALiB,EAMjB,MANiB,EAOjB,UAPiB,EAQjB,IARiB,EASjB,QATiB,EAUjB,IAViB,EAWjB,QAXiB,EAYjB,QAZiB,EAajB,WAbiB,EAcjB,YAdiB,EAejB,eAfiB,CAAd;;AAkBA,UAAMC,kCAAcC,GAAD,IAAS;AAC/B,cAAM,EAAEC,GAAF,EAAOC,KAAP,EAAcC,IAAd,EAAoBC,KAApB,KAA8B,sBAAQJ,GAAR,CAApC;;AAEA,eAAQ,OAAMC,GAAI,KAAIC,KAAM,KAAIC,IAAK,GAAEC,QAAQ,GAAR,GAAe,IAAGA,KAAM,EAAxB,GAA4B,EAAG,GAAtE;AACH,KAJM;;AAMP;AACO,UAAMC,gBAAIC,OAAO,IAAIC,MAAJ,CAAY,IAAGD,GAAI,GAAnB,EAAuB,GAAvB,CAAjB;;AAEA,UAAME,kBAAK,CAACC,GAAD,EAAM,EAAEC,OAAF,EAAWC,cAAX,EAA2BC,QAA3B,KAAwC,EAA9C,KAAqD,IACnEF,UAAU,EAAV,GAAe,IAAK,GACpBD,IAAII,GAAJ,CACIC,QAAQ,CACJH,iBACM,EADN,GAEM,GAHF,IAIAG,IALZ,EAMEC,IANF,CAMO,GANP,CAMY,IACZH,WAAW,EAAX,GAAgB,GAAI,EATjB;;AAWA,UAAMI,0BAAS,WAAf;AACA,UAAMC,oBAAM,QAAZ;;AAEA,UAAMC,0BAAU,GAAEV,GAAGV,KAAH,CAAU,IAAGkB,MAAO,MAAKR,GAAGV,KAAH,CAAU,IAAGkB,MAAO,oBAAmBA,MAAO,IAAzF;;sBAEQ,MAAM;AACjB;AACA;AACA;AACA;AACAG,aACId,EAAG,UAASa,MAAO,EAAnB,CADJ,EAEIE,uBAFJ;;AAMA;AACA;AACA;AACAD,aACId,EAAG,UAASW,MAAO,GAAEE,MAAO,EAA5B,CADJ,EAEI,CAACG,IAAD,EAAOC,KAAP,EAAcC,MAAd,KAAyB;AACrB,kBAAMC,sBAAsB,cAA5B;AACA,kBAAMC,iBAAiBJ,KAAKK,KAAL,CAAWF,mBAAX,CAAvB;;AAEA,gBAAIC,cAAJ,EAAoB;AAChB,sBAAME,eAAeC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,KAA3B,CAArB;AACAT,uBAAOA,KAAKU,OAAL,CAAaP,mBAAb,EAAkCG,YAAlC,CAAP;AACA,yCAASF,eAAe,CAAf,CAAT,EAA4BE,YAA5B;AACH;;AAED,kBAAMK,qBAAqB,aAA3B;AACA,kBAAMC,gBAAgBZ,KAAKK,KAAL,CAAWM,kBAAX,CAAtB;;AAEA,gBAAIC,aAAJ,EAAmB;AACfZ,uBAAOA,KAAKU,OAAL,CAAaC,kBAAb,EAAiCE,iBAAMD,cAAc,CAAd,CAAN,CAAjC,CAAP;AACH;;AAED,0CAAc,CAACV,MAAD,EAASD,KAAT,CAAd,EAA+Ba,IAA/B,CAAoCd,IAApC;AACH,SApBL;;AAuBA;AACA;AACAF,aACId,EAAG,yBAAwBa,MAAO,SAAQF,MAAO,EAAjD,CADJ,EAEI,CAACM,KAAD,EAAQC,MAAR,EAAgBa,QAAhB,EAA0Bf,IAA1B,KAAmC;AAC/B,0CAAc,CAACE,MAAD,EAASD,KAAT,CAAd,EAA+B,EAAED,MAAMe,QAAR,EAA/B,EACKC,KADL,GAEKF,IAFL,CAEUd,IAFV;AAGH,SANL;;AASA;AACAF,aACId,EAAG,SAAQa,MAAO,EAAlB,CADJ,EAEQoB,UAAU;AACV,kBAAMC,MAAMC,mBAAQF,MAAR,CAAZ;;AAEA,gBAAG,CAACC,GAAJ,EAAS,MAAME,MAAO,UAASH,MAAO,uBAAvB,CAAN;;AAETI,eAAGC,KAAH,CAASJ,GAAT;AACH,SARL;;AAWA;AACApB,aACId,EAAG,0CAAH,CADJ,EAEKuC,SAAD,IAAe;AACX,gBAAIC,SAAJ;AACAH,eAAGI,MAAH,GACKC,IADL,CACUC,OAAO;AACTH,4BAAYG,GAAZ;AACA,uBAAON,GAAGO,GAAH,CAAO,MAAP,CAAP;AACH,aAJL,EAKKF,IALL,CAKUG,QAAQ;AACV,sBAAM,EAAEC,YAAF,KAAmBD,KAAK,CAAL,CAAzB;AACA,sBAAME,KAAKR,cAAc,KAAd,GACL,CADK,GAELO,eAAe,GAFrB;;AAIAN,0BAAUQ,QAAV,CAAmB,CAAnB,EAAsBD,EAAtB;AACH,aAZL;AAaH,SAjBL;;AAoBA;AACAjC,aAAK,4BAAL,EAAmCmC,yBAAnC;;AAEAnC,aACId,EAAG,UAASa,MAAO,UAASA,MAAO,EAAnC,CADJ,EAEI,CAACqC,GAAD,EAAMC,GAAN,KAAc;AACV,0CAAcD,GAAd,EAAmBE,OAAnB,CAA2B,WAA3B;;AAEA,0CAAcD,GAAd,EAAmBT,IAAnB,CAAwBW,OAAO;AAC7BC,wBAAQC,GAAR,CAAYF,IAAI,CAAJ,EAAOG,eAAP,EAAZ;AACD,aAFD;AAGH,SARL;;AAWA;AACAC,aAAK,wCAAL,EAA+CxB,UAAU;AACrDI,eAAGH,GAAH,GAASwB,MAAT,CAAgB,SAAhB,EAA2BvB,mBAAQF,MAAR,CAA3B;AACH,SAFD;;AAIA;AACAwB,aACIzD,EAAG,gBAAeY,GAAI,GAAEC,MAAO,kBAAiBF,MAAO,IAAvD,CADJ,EAEI,CAACgD,MAAD,EAASC,EAAT,EAAa1C,MAAb,EAAqBF,IAArB,KAA8B;AAC1B,0CAAc,CAACE,MAAD,EAAS0C,EAAT,CAAd,EAA4B,EAAEC,UAAU,IAAZ,EAAkB7C,IAAlB,EAA5B,EACK0C,MADL,CACY,aADZ,EAC2BC,MAD3B;AAEH,SALL;;AAQA;AACAF,aACIzD,EAAG,gBAAeW,MAAO,GAAEE,MAAO,EAAlC,CADJ,EAEI,CAACG,IAAD,EAAO4C,EAAP,EAAW1C,MAAX,KAAsB,4BAAY0C,EAAZ,EAAgB,EAAE1C,MAAF,EAAUF,IAAV,EAAhB,CAF1B;;AAKA;AACA;AACA;AACAyC,aACIzD,EAAG,eAAca,MAAO,EAAxB,CADJ,EAEI,CAAC+C,EAAD,EAAK1C,MAAL,KAAgB,4BAAY0C,EAAZ,EAAgB,EAAE1C,MAAF,EAAhB,CAFpB;;AAKA;AACA;AACA;AACAuC,aACIzD,EAAG,mBAAkBa,MAAO,EAA5B,CADJ,EAEI,CAAC+C,EAAD,EAAK1C,MAAL,KAAgB;AACZ,0CAAc,CAACA,MAAD,EAAS0C,EAAT,CAAd,EAA4B,EAAEC,UAAU,IAAZ,EAA5B,EACKH,MADL,CACY,aADZ,EAC2B,CAD3B;AAEH,SALL;;AAQA;AACAD,aAAK,6BAAL,EAAoCK,sBAApC;;AAEA;AACAL,aAAK,mCAAL,EAA0CK,sBAA1C;;AAEA;AACAL,aACIzD,EAAG,kBAAiBW,MAAO,cAAaE,MAAO,EAA/C,CADJ,EAEI,CAACkD,UAAD,EAAaH,EAAb,EAAiB1C,MAAjB,KAA4B;AACxB,0CAAc,CAACA,MAAD,EAAS0C,EAAT,CAAd,EAA4BF,MAA5B,CAAmC,UAAnC,EAA+C,kBAA/C,EAAmEhE,WAAWqE,UAAX,CAAnE;AACH,SAJL;;AAOC;AACAN,aACGzD,EAAG,kBAAiBW,MAAO,UAASE,MAAO,EAA3C,CADH,EAEG,CAACkD,UAAD,EAAaH,EAAb,EAAiB1C,MAAjB,KAA4B;AACxB,0CAAc,CAACA,MAAD,EAAS0C,EAAT,CAAd,EAA4BF,MAA5B,CAAmC,UAAnC,EAA+C,cAA/C,EAA+DhE,WAAWqE,UAAX,CAA/D;AACH,SAJJ;AAMJ,K","file":"generateAutoPhrases.js","sourcesContent":["import hex2rgb from 'hex-rgb';\n\nimport {\n    SCREENS,\n    STATE,\n    setState,\n} from './variables';\n\nimport {\n    clickElement,\n    shouldExist,\n    getNormalized,\n    waitForResults,\n} from './functions';\n\nexport const verbs = [\n    'a',\n    'on',\n    'on the',\n    'an a',\n    'the',\n    'into',\n    'into the',\n    'of',\n    'of the',\n    'in',\n    'in the',\n    'inside',\n    'inside of',\n    'inside the',\n    'inside of the',\n];\n\nexport const hex2rgbCSS = (hex) => {\n    const { red, green, blue, alpha } = hex2rgb(hex);\n\n    return `rgb(${red}, ${green}, ${blue}${alpha < 255 ? ` ${alpha}` : ''})`;\n}\n\n// regex builder (via string)\nexport const r = str => new RegExp(`^${str}$`, 'i');\n\nexport const or = (arr, { capture, noLeadingSpace, required } = {}) =>`(${\n    capture ? '' : '?:'}${\n    arr.map(\n        word => (\n            noLeadingSpace\n                ? ''\n                : ' '\n            ) + word\n    ).join('|')})${\n    required ? '' : '?'}`;\n\nexport const string = '\"([^\"]+)\"';\nexport const int = '(\\\\d+)';\n\nexport const elInEl = `${or(verbs)} ${string}(?:${or(verbs)} ${string})?(?: containing ${string})?`;\n\nexport default () => {\n    // ex:  I click on the \"Button\"\n    //      I click \"Save\"\n    //      I click on \"Save\" inside the \"Modal\"\n    //      I click on \"Button\" inside the \"Modal\" containing \"Save\"\n    When(\n        r(`I click${elInEl}`),\n        clickElement\n    );\n\n\n    // ex:  I type \"toli\" into the \"Username Input\"\n    //      I type \"toli\" into \"Username\"\n    //      I type \"toli\" into the \"Username Input\" on the \"SignIn form\"\n    When(\n        r(`I type ${string}${elInEl}`),\n        (text, input, parent) => {\n            const randomVariableRegex = /<rand:(\\w)+>/;\n            const randomVariable = text.match(randomVariableRegex);\n            \n            if (randomVariable) {\n                const randomNumber = Math.round(Math.random() * 10000);\n                text = text.replace(randomVariableRegex, randomNumber);\n                setState(randomVariable[1], randomNumber);\n            }\n\n            const stateVariableRegex = /<var:(\\w)+>/;\n            const stateVariable = text.match(stateVariableRegex);\n\n            if (stateVariable) {\n                text = text.replace(stateVariableRegex, STATE[stateVariable[1]]);\n            }\n\n            getNormalized([parent, input]).type(text);\n        }\n    );\n\n    // ex:  When I replace the contents of \"Username\" with \"toli\"\n    //      When I replace the contents of \"Username\" inside of the \"Login Modal\" with \"toli\"\n    When(\n        r(`I replace the contents${elInEl} with ${string}`),\n        (input, parent, contains, text) => {\n            getNormalized([parent, input], { text: contains })\n                .clear()  \n                .type(text);\n        }\n    );\n\n    // ex: I open the \"Login Screen\"\n    When(\n        r(`I open${elInEl}`),\n            screen => {\n            const url = SCREENS[screen];\n            \n            if(!url) throw Error(`Screen ${screen} has no specified URL`);\n            \n            cy.visit(url); \n        }\n    );\n\n    // ex: I scroll to the bottom the \"Modal\"\n    When(\n        r(`I scroll to the (top|bottom) of the page`),\n        (direction) => {\n            let windowObj;\n            cy.window()\n                .then(win => {\n                    windowObj = win;\n                    return cy.get('body');\n                })\n                .then(body => {\n                    const { scrollHeight } = body[0];\n                    const px = direction === 'top'\n                        ? 0\n                        : scrollHeight + 100;\n\n                    windowObj.scrollTo(0, px);\n                });\n        }\n    );\n\n    // @TODO: Figure out while default way isn't working\n    When('I wait for results to load', waitForResults);\n\n    When(\n        r(`I drag ${elInEl} above ${elInEl}`),\n        (el1, el2) => {\n            getNormalized(el1).trigger('mouseover');\n            \n            getNormalized(el2).then($el => {\n              console.log($el[0].getBoundingRect());\n            });\n        }\n    );\n\n    // ex: I should be redirected to the \"Login Screen\"\n    Then('I should be redirected to the {string}', screen => {\n        cy.url().should('contain', SCREENS[screen]);\n    });\n\n    // I should see 3 \"Buttons\" in \"Modal\"\n    Then(\n        r(`I should see ${int}${elInEl}(?: containing ${string})?`),\n        (number, el, parent, text) => {\n            getNormalized([parent, el], { singular: true, text })\n                .should('have.length', number);\n        }\n    );\n\n    // ex: I should see \"Press Me\" on the \"Button\" inside the \"Modal\"\n    Then(\n        r(`I should see ${string}${elInEl}`),\n        (text, el, parent) => shouldExist(el, { parent, text })\n    );\n\n    // putting after because the one before exclusively works \n    // for text and doesn't have a verb before it\n    // ex: I should see \"Press Me Button\" on the \"Button\" inside the \"Modal\"\n    Then(\n        r(`I should see${elInEl}`),\n        (el, parent) => shouldExist(el, { parent })\n    );\n\n    // ex:  I should not see the \"Buttons\" in the \"Modal\"\n    //      I should not see \"Buttons\" on the \"Page\"\n    //      I should not see the \"Button\"\n    Then(\n        r(`I should not see${elInEl}`),\n        (el, parent) => {\n            getNormalized([parent, el], { singular: true })\n                .should('have.length', 0);\n        }\n    );\n\n    // ex: \"Username\" should be \"toli\"\n    Then('{string} should be {string}', shouldExist);\n\n    // ex: \"Username's\" value should be \"toli\"\n    Then('{string} value should be {string}', shouldExist);\n\n    // ex: I should see a \"red\" background on the \"Button\"\n    Then(\n        r(`I should see a ${string} background${elInEl}`),\n        (background, el, parent) => {\n            getNormalized([parent, el]).should('have.css', 'background-color', hex2rgbCSS(background))\n        }\n    )\n\n     // ex: I should see a \"red\" border on the \"Button\"\n     Then(\n        r(`I should see a ${string} border${elInEl}`),\n        (background, el, parent) => {\n            getNormalized([parent, el]).should('have.css', 'border-color', hex2rgbCSS(background))\n        }\n    )\n}\n"]}