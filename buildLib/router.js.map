{"version":3,"sources":["../lib/router.js"],"names":["routes","beforeEach","cy","server","route","Object","entries","forEach","path","endpoint","as","loadLargeFixture","url","response","method","onRequest","xhr","originalOnLoad","onload","defineProperty","writable","apply"],"mappings":";;;;;;;;;;;;;;;;;;;sBAAgBA,MAAD,IAAY;AACvBC,mBAAW,MAAM;AACbC,eAAGC,MAAH;;AAEA;AACAD,eAAGE,KAAH,CAAS,IAAT,EAAe,EAAf;;AAEA;AACAC,mBAAOC,OAAP,CAAeN,MAAf,EAAuBO,OAAvB,CAA+B,CAAC,CAACC,IAAD,EAAOC,QAAP,CAAD,KAAsB;AACjD;AACAP,mBAAGE,KAAH,CAASI,IAAT,EAAgB,WAAUC,QAAS,OAAnC,EACKC,EADL,CACQD,QADR;AAEH,aAJD;AAKH,SAZD;AAaH,K;;AAED;AACA,aAASE,gBAAT,CAA0BC,GAA1B,EAA+BC,QAA/B,EAAyCC,SAAS,KAAlD,EAAyD;AACrD,eAAOZ,GAAGE,KAAH,CAAS;AACZQ,eADY;AAEZE,kBAFY;AAGZC,uBAAWC,OAAO;AACd,sBAAMC,iBAAiBD,IAAIA,GAAJ,CAAQE,MAA/B;AACAF,oBAAIA,GAAJ,CAAQE,MAAR,GAAiB,YAAW;AACxBb,2BAAOc,cAAP,CAAsB,IAAtB,EAA4B,UAA5B,EAAwC;AACpCC,kCAAU;AAD0B,qBAAxC;AAGA,yBAAKP,QAAL,GAAgBA,QAAhB;AACAI,mCAAeI,KAAf,CAAqB,IAArB,EAA2BL,GAA3B;AACH,iBAND;AAOH;AAZW,SAAT,CAAP;AAcH","file":"router.js","sourcesContent":["export default (routes) => {\n    beforeEach(() => {\n        cy.server();\n\n        // disable all xhrs\n        cy.route('**', {});\n    \n        // implement our fixtures\n        Object.entries(routes).forEach(([path, endpoint]) => {\n            //cy.fixture(`${endpoint}.json`).as(`fixture${endpoint}`);\n            cy.route(path, `fixture:${endpoint}.json`)\n                .as(endpoint);\n        });\n    });\n}\n\n// https://github.com/cypress-io/cypress/issues/76\nfunction loadLargeFixture(url, response, method = 'GET') {\n    return cy.route({\n        url,\n        method,\n        onRequest: xhr => {\n            const originalOnLoad = xhr.xhr.onload;\n            xhr.xhr.onload = function() {\n                Object.defineProperty(this, 'response', {\n                    writable: true\n                });\n                this.response = response;\n                originalOnLoad.apply(this, xhr);\n            };\n        }\n    });\n}"]}